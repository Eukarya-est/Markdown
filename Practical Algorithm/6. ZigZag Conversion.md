# 6. ZigZag Conversion

#String #Brute-Force #Math

[toc]

## 1) Question

The string `"PAYPALISHIRING"` is written in a zigzag pattern on a given number of rows like this: (you may want to display this pattern in a fixed font for better legibility)

```
P   A   H   N
A P L S I I G
Y   I   R
```

And then read line by line: `"PAHNAPLSIIGYIR"`

Write the code that will take a string and make this conversion given a number of rows:

```
string convert(string s, int numRows);
```

 

**Example 1:**

```
Input: s = "PAYPALISHIRING", numRows = 3
Output: "PAHNAPLSIIGYIR"
```

**Example 2:**

```
Input: s = "PAYPALISHIRING", numRows = 4
Output: "PINALSIGYAHRPI"
Explanation:
P     I    N
A   L S  I G
Y A   H R
P     I
```

**Example 3:**

```
Input: s = "A", numRows = 1
Output: "A"
```

 

**Constraints:**

- `1 <= s.length <= 1000`
- `s` consists of English letters (lower-case and upper-case), `','` and `'.'`.
- `1 <= numRows <= 1000`

## 2) Solution

### ・Math

- Time Complexity: $$ O(n) $$
- Space Complexity: $$ O(1) $$

#### a. C++

- Runtime: 0ms
- Memory: 11.10 MB

```C++
class Solution {
public:
    string convert(string s, int numRows) {
        string ans;

        if (s.length() == 1 || numRows == 1)
            return s;

        for (int row = 0; row < numRows; ++row) {
            int i = row;
            // In a zigzag pattern with numRows, one complete "V" shape
            // ⇒ Cycle = numRows + (numRows - 2)
            int j = i + numRows + (numRows - 2);
            while (i < s.length()) {
                ans.push_back(s[i]);
                if (j - (2 * row) < s.length() && row > 0 && row < numRows - 1)
                    // The Diagonal Character (s[j - 2 × row])
                    ans.push_back(s[j - (2 * row)]);
                i = j;
                j = i + numRows + (numRows - 2);
            };
        };

        return ans;
    };

};
```

#### b. Go

- Runtime: 0ms
- Memory: 6.64 MB

```go
func convert(s string, numRows int) string {
    if len(s) == 1 || numRows == 1 {
        return s
    }

    str := []rune(s)
	ans := make([]rune, 0, len(str))
    cycle := numRows + (numRows - 2)

    for row := 0 ; row < numRows; row++ {
        for i := row; i < len(str); i += cycle {
            ans = append(ans, str[i])

            j := i + cycle - (2 * row)

            if row > 0 && row < numRows - 1 && j < len(str)  {
                ans = append(ans, str[j])
            }
        }
    }

    return string(ans)
}
```

#### c. Python

- Runtime: 9ms
- Memory: 19.32MB

```python
class Solution:
    def convert(self, s: str, num_rows: int) -> str:
        n = len(s)
        if num_rows == 1 or num_rows >= n:
            return s

        ans = []
        cycle = 2 * num_rows - 2

        for row in range(num_rows):
            for i in range(row, n, cycle):
                ans.append(s[i])

                j = i + cycle - 2 * row
                
                if 0 < row < num_rows - 1 and j < n:
                    ans.append(s[j])

        return "".join(ans)
```

#### d. Illustration

##### s = mhieamcatts / numRows = 3

1️⃣![6-a](.\imgs\6-a.png)

2️⃣<img src=".\imgs\6-b.png" alt="6-b" style="zoom:80%;" />

3️⃣![6-c](.\imgs\6-c.png)

4️⃣![6-d](.\imgs\6-d.png)

5️⃣![6-e](.\imgs\6-e.png)6️⃣![6-f](.\imgs\6-f.png)7️⃣![6-g](.\imgs\6-g.png)8️⃣![6-h](.\imgs\6-h.png)9️⃣![6-i](.\imgs\6-i.png)

1️⃣0️⃣![6-j](.\imgs\6-j.png)

1️⃣1️⃣![6-k](.\imgs\6-k.png)

1️⃣2️⃣![6-l](.\imgs\6-l.png)

## Reference

1. LeetCode [6. Zigzag Conversion]
   - https://leetcode.com/problems/zigzag-conversion/
2. LeetCode Solutions [6. Zigzag Conversion] by P.-Y. Chen
   - https://walkccc.me/LeetCode/problems/6/