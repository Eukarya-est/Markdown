# 3. Longest Substring Without Repeating Characters

#Hash Table #Sliding Window #String

[toc]

## 1) Question

Given a string `s`, find the length of the **longest substring** without duplicate characters.

You may assume the two numbers do not contain any leading zero, except the number 0 itself.

**Example 1:**

```structured text
Input: s = "abcabcbb"
Output: 3
Explanation: The answer is "abc", with the length of 3. Note that "bca" and "cab" are also correct answers.
```

**Example 2:**

```structured text
Input: s = "bbbbb"
Output: 1
Explanation: The answer is "b", with the length of 1.
```

**Example 3:**

```structured text
Input: s = "pwwkew"
Output: 3
Explanation: The answer is "wke", with the length of 3.
Notice that the answer must be a substring, "pwke" is a subsequence and not a substring.
```

**Constraints:**

- `0 <= s.length <= 5 * 104`
- `s` consists of English letters, digits, symbols and spaces.

## 2) Solution

### (1) Sliding Window

- Time Complexity: $$ O(n) $$
- Space Complexity: $$ O(1) $$

#### a. C++

- Runtime: 4ms
- Memory: 10.83 MB

```c++
class Solution {
 public:
  int lengthOfLongestSubstring(string s) {
    int ans = 0;
    vector<int> count(128); // ASCII 0 to 127

    for (int l = 0, r = 0; r < s.length(); ++r) {
      // When we use a character as an index, it is automatically converted to its ASCII code.
      //If s[r] = 'a' → 97 ⇒ count[97] = 1
      ++count[s[r]];
      while (count[s[r]] > 1) // If repeating recognized
        --count[s[l++]]; // move left pointer
      ans = max(ans, r - l + 1);
    }

    return ans;
  }
};
```

#### b. Go

- Runtime: 0ms
- Memory: 4.50 MB

```Go
func lengthOfLongestSubstring(s string) int {
    count := [128]int{}
    ans := 0

    for l, r := 0, 0; r < len(s); r++ {
        count[s[r]]++
        for count[s[r]] > 1 {
            count[s[l]]--
            l++
        }
        if length := r - l + 1; length > ans {
            ans = length
        }
       
    }
    return ans
}

```

#### c. Python

- Runtime: 35ms
- Memory: 17.91 MB

```python
class Solution:
    def lengthOfLongestSubstring(self, s: str) -> int:
        ans = 0
        count = collections.Counter()

        l = 0
        for r, c in enumerate(s):
            count[c] += 1
            while count[c] > 1:
                count[s[l]] -= 1
                l += 1
            ans = max(ans, r - l + 1)

        return ans

```

### (2) Last Seen

- Time Complexity: $$ O(n) $$
- Space Complexity: $$ O(1) $$

#### a. C++

- Runtime: 0ms
- Memory: 10.87 MB

```c++
class Solution {
 public:
  int lengthOfLongestSubstring(string s) {
    int ans = 0;
    // The substring s[j + 1..i] has no repeating characters.
    int j = -1;
    // lastSeen[c] := the index of the last time c appeared
    vector<int> lastSeen(128, -1);

    for (int i = 0; i < s.length(); ++i) {
      // Update j to lastSeen[s[i]], so the window must start from j + 1.
      j = max(j, lastSeen[s[i]]);
      ans = max(ans, i - j);
      lastSeen[s[i]] = i;
    }

    return ans;
  }
};
```

#### b. Go

```Go
package main

func lengthOfLongestSubstring(s string) int {
	ans := 0
	j := -1

	lastSeen := make([]int, 128)
    for i := range lastSeen {
        lastSeen[i] = -1
    }

	for i := 0; i < len(s); i++ {
		c := s[i]

		if lastSeen[c] > j {
			j = lastSeen[c]
		}

		if i-j > ans {
			ans = i - j
		}

		lastSeen[c] = i
	}

	return ans
}
```

#### c. Python

```Python
class Solution:
    def lengthOfLongestSubstring(self, s: str) -> int:
        ans = 0
        j = -1
        lastSeen = {}

        for i, c in enumerate(s):
			# lastSeen.get(c, -1): 
            # If a key 'c' is not exist, return '-1'
            j = max(j, lastSeen.get(c, -1))
            ans = max(ans, i - j)
            lastSeen[c] = i

        return ans
```

## 3) My code

### (1)

- Time Complexity: $$ O(n^2) $$
  - For each start index,  the inner `while` loop

- Space Complexity: $$ O(n) $$
  - Due to recursion depth; `seen` is small (constant)

- Runtime: 1034 ms
- Memory: 272.22 MB


```c++
class Solution {
public:
    int lengthOfLongestSubstring(string s) {
        int result = 0;
        std::set<char> seen;
        
        search(s, 0, seen, result);
        return result;
    };

    void search(string& str, int start, set<char>& seen, int& result){
        if(start > str.length()) return;
        int pre = 0;
        int post = 0;
        int i = start;

        while(i < str.length()){
            pre = seen.size();
            seen.insert(str[i]);
            post = seen.size();

            if (post > result){
                result = post;
            };

            if(post <= pre){
                seen.clear();
                break;
            }
            i++;
        };
        
        search(str, start + 1, seen, result);

    };
}; 
```

### (2)

- Time Complexity: $$ O(n^2) $$
  - Each starting index scanned forward
- Space Complexity: $$ O(n) $$
  - Recursion depth up to `n`, `set` is constant-sized

- Runtime: 1046 ms
- Memory: 271.84 MB

```c++
class Solution {
public:
    int lengthOfLongestSubstring(string s) {
        int result = 0;
        std::set<char> seen;
        
        search(s, 0, seen, result);
        
        return result;
    };

    void search(string& str, int start, set<char>& seen, int& result){
        if(start > str.length()) return;
        int i = start;
        int len = 0;

        while(i < str.length()){
            
            if(seen.count(str[i])){
                seen.clear();
                break;
            } else {
                seen.insert(str[i]);
            };
            len = seen.size();
            i++;
        };
        
        if(result < len) result = len;
        search(str, start + 1, seen, result);

    };
}; 
```

## Reference

1. LeetCode [Longest Substring Without Repeating Characters]
   - https://leetcode.com/problems/longest-substring-without-repeating-characters/
2. LeetCode Solutions [Longest Substring Without Repeating Characters] by P.-Y. Chen
   - https://walkccc.me/LeetCode/problems/3/